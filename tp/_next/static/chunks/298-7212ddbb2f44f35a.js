"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[298],{61848:function(n,e,o){o.d(e,{Xp:function(){return mn},hm:function(){return w},on:function(){return y},pO:function(){return P}});var t=o(26042),r=o(69396),a=o(828),i=o(85893),s=o(27404),u=o(80975),c=o(67294),l=o(4480),d=o(76910),p=o(47568),f=o(34051),m=o.n(f),v=o(56979),k=o(94530),g=o(88767),b=o(8552),h=o(52199),x=o(36337),y=function(n){var e=function(n){var e=n.tokenAmount,o=n.tokenASymbol,t=n.tokenBSymbol,r=n.enabled,i=void 0===r||r,s=n.refetchInBackground,u=(0,h.h)(),c=(0,v.wp)(o),l=(0,v.wp)(t),d=(0,a.Z)((0,k.M)({tokenA:c,tokenB:l}),1)[0];return(0,g.useQuery)("tokenToTokenPrice/".concat(t,"/").concat(o,"/").concat(e),(0,p.Z)(m().mark((function n(){return m().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(c&&l&&d)){n.next=4;break}return n.next=3,(0,x.g)({matchingPools:d,tokenA:c,tokenB:l,client:u,amount:e});case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),n)}))),{enabled:Boolean(i&&u&&d&&c&&l&&e>0&&t!==o),refetchOnMount:!1,refetchInterval:s?b.w7:void 0,refetchIntervalInBackground:Boolean(s)})}(n),o=e.data,t=e.isLoading,r=(0,u.tN)(t?void 0:o);return[(t?r:o)||{price:0},t]},w=function(n){var e=n.tokenASymbol,o=n.tokenBSymbol,t=(0,a.Z)(y({tokenASymbol:e,tokenBSymbol:o,tokenAmount:1}),2),r=t[0].price,i=t[1];return[(0,u.tN)(i?void 0:r),i]},S=o(86501),$=o(20340),A=o(78284),j=o(71505),T=o(65047),C=o(21077),Z=(0,l.cn)({key:"tokenSwap",default:[{tokenSymbol:null,amount:0},{tokenSymbol:null,amount:0}],effects_UNSTABLE:[function(n){var e=n.onSet,o=n.setSelf;e((function(n,e){var t=(0,a.Z)(n,2),r=t[0],i=t[1];r.tokenSymbol===i.tokenSymbol&&requestAnimationFrame((function(){o([e[1],e[0]])}))}))}]}),B=(0,l.cn)({key:"slippageForSwap",default:.01}),z=o(25344);var P=function(n){var e=n.tokenASymbol,o=n.tokenBSymbol,t=n.tokenAAmount,r=n.tokenToTokenPrice,i=n.isLoading,s=(0,a.Z)((0,z.t)(e),2),c=s[0],l=s[1],d=(0,a.Z)(w({tokenASymbol:e,tokenBSymbol:o}),1)[0],p=(c||0)*(t||0),f=e&&o&&r>0&&"number"===typeof t&&"number"===typeof r||d&&0===t,m=(0,u.tN)(i||l||!f?void 0:(0,j.Kf)(function(n){var e=n.tokenAAmount,o=n.tokenToTokenPrice,t=n.oneTokenToTokenPrice;return 0===e?t:o/e}({tokenAAmount:t,tokenToTokenPrice:r,oneTokenToTokenPrice:d}))),v=(0,u.tN)(i||l||!f?void 0:(0,j.Kf)(function(n){var e=n.conversionRate,o=n.tokenADollarPrice,t=n.oneTokenToTokenPrice;return 0===n.tokenAAmount?o:o*e/t}({tokenAAmount:t,conversionRate:m,tokenADollarPrice:c,oneTokenToTokenPrice:d})));return{isShowing:Boolean(f),conversionRate:m,conversionRateInDollar:v,dollarValue:p}},_=o(31952),F=function(n){var e=n.tokenSymbol,o=n.availableAmount,t=n.disabled,r=n.onChange,a=(0,v.Vd)();return!t&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(u.zx,{variant:"secondary",onClick:function(n){n.stopPropagation();var t=e===(null===a||void 0===a?void 0:a.symbol)?o-.025:o;r(t)},children:"Max"}),(0,i.jsx)(u.zx,{variant:"secondary",onClick:function(){return r(o/2)},children:"1/2"})]})},I=o(99534),R=function(n){var e=n.searchQuery,o=n.onQueryChange,r=(0,I.Z)(n,["searchQuery","onQueryChange"]),a=(0,c.useRef)();return(0,c.useEffect)((function(){return a.current.focus(),function(){o("")}}),[o]),(0,i.jsxs)(u.gF,{gap:5,css:{padding:"$7 $5",width:"100%"},children:[(0,i.jsx)(u.W1,{color:"tertiary"}),(0,i.jsx)(u.xv,{variant:"secondary",children:(0,i.jsx)("input",(0,t.Z)({ref:a,type:"text",lang:"en-US",placeholder:"Search name or symbol",value:e,onChange:function(n){var e=n.target.value;return o(e)},autoComplete:"off",style:{width:"100%"}},r))})]})},E=function(n){var e=n.amount,o=n.disabled,r=n.onAmountChange,a=n.inputRef,s=(0,I.Z)(n,["amount","disabled","onAmountChange","inputRef"]),c=(0,u.Y6)({amount:e,onAmountChange:r}),l=c.value,d=c.setValue;return(0,i.jsx)(u.xv,{variant:"primary",children:(0,i.jsx)(D,(0,t.Z)({ref:a,type:"number",lang:"en-US",placeholder:"0.0",min:0,value:l,onChange:o?void 0:function(n){var e=n.target.value;return d(e)},autoComplete:"off",readOnly:o,style:{width:"".concat((0,u.TL)(l),"ch")}},s))})},D=(0,u.zo)("input",{width:"auto",textAlign:"right",color:"inherit"}),L=o(67934),M=function(n){var e=n.isSelecting,o=n.onToggle,a=n.availableAmount,s=n.tokenSymbol,c=((0,v.wp)(s)||{}).logoURI,l=(0,u.a)(a,{includeCommaSeparation:!0}),d=Boolean(s);return(0,i.jsxs)(N,(0,r.Z)((0,t.Z)({state:e||!s?"selecting":"selected"},(0,L.m)({onClick:o})),{variant:"ghost",children:[(e||!d)&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(u.xv,{variant:"body",children:"Select a token"}),(0,i.jsx)(u.a1,{size:"large",rotation:s?"90deg":"-90deg",color:"tertiary",icon:(0,i.jsx)(u.Tt,{})})]}),!e&&d&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(u.zr,{logoURI:c,size:"big",alt:s}),(0,i.jsxs)("div",{children:[(0,i.jsx)(u.xv,{variant:"body",children:s}),(0,i.jsxs)(u.xv,{variant:"secondary",children:[l," available"]})]}),(0,i.jsx)(u.a1,{size:"medium",rotation:"-90deg",color:"tertiary",icon:(0,i.jsx)(u.Tt,{})})]})]}))},N=(0,u.zo)(u.xd,{cursor:"pointer",display:"grid",alignItems:"center",backgroundColor:"$colors$dark0",borderRadius:"$1",transition:"background-color .1s ease-out",userSelect:"none",whiteSpace:"pre",variants:{state:{selected:{padding:"$4 $6",columnGap:"$space$6",gridTemplateColumns:"$space$15 1fr $space$8",minWidth:231},selecting:{margin:"$space$1 0",padding:"$space$6 $8",columnGap:"$space$4",gridTemplateColumns:"1fr $space$8"}}}}),O=o(3413),Q=function(n){var e=n.activeTokenSymbol,o=n.onSelect,u=(0,I.Z)(n,["activeTokenSymbol","onSelect"]),c=(0,a.Z)((0,s.K)(),1)[0].tokens.filter((function(n){return"TMUN"==n.symbol||"DGM"==n.symbol}));return(0,i.jsx)(O.q6,(0,r.Z)((0,t.Z)({},u),{tokenList:c,activeTokenSymbol:e,onSelect:o,fetchingBalanceMode:"native"}))},q=function(n){var e=n.readOnly,o=n.disabled,t=n.tokenSymbol,r=n.amount,a=n.onChange,s=n.size,l=void 0===s?"large":s,d=(0,c.useRef)(),p=(0,c.useRef)(),f=(0,c.useState)(!1),m=f[0],v=f[1],k=(0,_.m)(t).balance,g=(0,c.useState)(""),b=g[0],h=g[1],x=(0,c.useState)(!1),y=x[0],w=x[1],S=(0,c.useState)(!1),$=S[0],A=S[1],j=Boolean(!m&&t&&!e&&k>0),T=function(n){return a({tokenSymbol:t,amount:n})},C=function(n){a({tokenSymbol:n,amount:r}),v(!1)};return(0,u.t$)([d],(function(){v(!1)})),"small"===l?(0,i.jsxs)(X,{selected:y,ref:d,children:[m&&(0,i.jsxs)(u.gF,{justifyContent:"space-between",css:{padding:"$5 $6"},children:[(0,i.jsx)(R,{searchQuery:b,onQueryChange:h,onFocus:function(){w(!0)},onBlur:function(){w(!1)}}),(0,i.jsx)(u.zx,{icon:(0,i.jsx)(u.a1,{icon:(0,i.jsx)(u.EJ,{})}),variant:"ghost",onClick:function(){return v(!1)},iconColor:"tertiary"})]}),!m&&(0,i.jsx)(u.gF,{css:{padding:"$6 $4",display:"grid"},children:(0,i.jsx)(M,{availableAmount:k,tokenSymbol:t,isSelecting:m,onToggle:o?void 0:function(){return v((function(n){return!n}))}})}),!m&&(0,i.jsxs)(H,{rendersButtons:j,selected:!e&&$,onClick:function(){p.current.focus()},children:[j&&(0,i.jsx)(u.gF,{gap:4,children:(0,i.jsx)(F,{tokenSymbol:t,availableAmount:k,onChange:T})}),(0,i.jsx)(E,{inputRef:p,amount:r,disabled:!t||e||o,onAmountChange:T,onFocus:function(){A(!0)},onBlur:function(){A(!1)}})]}),m&&(0,i.jsx)(Q,{activeTokenSymbol:t,onSelect:C,css:{padding:"$4 $6 $12"},queryFilter:b,emptyStateLabel:"No result for \u201c".concat(b,"\u201d"),visibleNumberOfTokensInViewport:4.5})]}):(0,i.jsxs)(X,{selected:$||y,ref:d,children:[(0,i.jsxs)(G,{children:[(0,i.jsxs)(U,{children:[m&&(0,i.jsx)(R,{searchQuery:b,onQueryChange:h,onFocus:function(){w(!0)},onBlur:function(){w(!1)}}),!m&&(0,i.jsx)(M,{availableAmount:k,tokenSymbol:t,isSelecting:m,onToggle:o?void 0:function(){return v((function(n){return!n}))}}),j&&(0,i.jsx)(u.gF,{gap:4,css:{paddingLeft:"$8"},children:(0,i.jsx)(F,{disabled:k<=0,tokenSymbol:t,availableAmount:k,onChange:o?function(){}:T})})]}),(0,i.jsxs)(J,{children:[m&&(0,i.jsx)(u.zx,{icon:(0,i.jsx)(u.a1,{icon:(0,i.jsx)(u.EJ,{})}),variant:"ghost",onClick:function(){return v(!1)},iconColor:"tertiary"}),!m&&(0,i.jsx)(E,{inputRef:p,amount:r,disabled:!t||e||o,onAmountChange:T,onFocus:function(){A(!0)},onBlur:function(){A(!1)}})]}),(0,i.jsx)(V,{interactive:!e&&!$,onClick:function(){var n;e||(m?v(!1):null===(n=p.current)||void 0===n||n.focus())}})]}),m&&(0,i.jsx)(Q,{activeTokenSymbol:t,onSelect:C,queryFilter:b,css:{padding:"$4 $6 $12"},emptyStateLabel:"No result for \u201c".concat(b,"\u201d")})]})},G=(0,u.zo)("div",{padding:"$5 $15 $5 $7",display:"flex",alignItems:"center",justifyContent:"space-between",position:"relative",zIndex:0}),U=(0,u.zo)("div",{display:"flex",alignItems:"center",position:"relative",zIndex:1}),J=(0,u.zo)("div",{display:"flex",alignItems:"center",justifyContent:"flex-end",position:"relative",zIndex:1}),V=(0,u.zo)("div",{position:"absolute",left:0,top:0,width:"100%",height:"100%",zIndex:0,backgroundColor:"$colors$dark0",transition:"background-color .1s ease-out",variants:{interactive:{true:{cursor:"pointer","&:hover":{backgroundColor:"$colors$dark5"}}}}}),K={true:{boxShadow:"0 0 0 $space$1 $borderColors$selected"},false:{boxShadow:"0 0 0 $space$1 $colors$dark0"}},X=(0,u.zo)("div",{borderRadius:"$2",transition:"box-shadow .1s ease-out",variants:{selected:K}}),H=(0,u.zo)("div",{borderRadius:"$2",transition:"box-shadow .1s ease-out",display:"flex",alignItems:"center",variants:{selected:K,rendersButtons:{true:{justifyContent:"space-between",padding:"$10 $12"},false:{justifyContent:"flex-end",padding:"$13 $12"}}}}),W=o(21405),Y=function(n){var e=n.slippage,o=void 0===e?.01:e,t=n.onSlippageChange,r=n.css,a=(0,c.useState)(!1),s=a[0],l=a[1],d=(0,c.useRef)();return(0,u.t$)([d],(function(){l(!1)})),(0,i.jsxs)(nn,{ref:d,children:[(0,i.jsxs)(en,{active:s,css:r,onClick:function(){l(!s)},children:[(0,i.jsxs)(u.xv,{variant:"legend",children:["Slippage ",100*o,"%"]}),(0,i.jsx)(u.a1,{size:"large",color:"tertiary",icon:(0,i.jsx)(u.Tt,{}),rotation:s?"90deg":"-90deg"})]}),s&&(0,i.jsxs)(on,{children:[(0,i.jsx)(u.xv,{variant:"caption",color:"tertiary",children:"Your transaction will not complete if price slips below target threshold."}),(0,i.jsx)(tn,{children:b.js.map((function(n){return(0,i.jsx)(rn,{active:o===n,onClick:function(){t(n),l(!1)},children:(0,i.jsxs)(u.xv,{variant:"body",children:[100*n,"%"]})},n)}))})]})]})},nn=(0,u.zo)("div",{position:"relative"}),en=(0,u.zo)("button",{textTransform:"uppercase",display:"flex",alignItems:"center",justifyContent:"space-between",columnGap:"$space$4",padding:"$6 $13",userSelect:"none",borderRadius:"$2",transition:"background-color .1s ease-out","&:hover":{backgroundColor:"$colors$dark15"},"&:active":{backgroundColor:"$colors$dark5"},variants:{active:{true:{backgroundColor:"$colors$dark15"},false:{backgroundColor:"$colors$dark10"}}}}),on=(0,u.zo)("div",{textTransform:"none",backgroundColor:"$colors$light",padding:"$7",position:"absolute",width:"284px",bottom:"calc(100% + $space$2)",left:0,borderRadius:"$1",display:"flex",flexDirection:"column",rowGap:"13px",border:"1px solid $borderColors$default"}),tn=(0,u.zo)("div",{display:"flex",justifyContent:"space-between",alignItems:"center"}),rn=(0,u.zo)("button",{borderRadius:"$1",padding:"$4 $8",color:"$textColors$secondary",transition:"background-color .1s ease-out",variants:{active:{true:{backgroundColor:"$dark10"},false:{backgroundColor:"$dark0"}}},"&:hover":{backgroundColor:"$dark15"},"&:active":{backgroundColor:"$dark5"}}),an=function(n){var e=n.isPriceLoading,o=n.size,s=void 0===o?"large":o,f=(0,c.useState)(!1),k=f[0],h=f[1],x=(0,a.Z)((0,l.sJ)(Z),2),w=x[0],z=x[1],P=(0,_.m)(null===w||void 0===w?void 0:w.tokenSymbol).balance,F=(0,l.sJ)(A.Zc).status,I=(0,W.O)().mutate,R=(0,a.Z)((0,l.FV)(B),2),E=R[0],D=R[1],L=function(n){var e=n.tokenASymbol,o=n.tokenBSymbol,s=n.tokenAmount,c=(0,l.sJ)(A.Zc),f=c.client,k=c.address,b=c.status,h=(0,l.Zl)(d.c),x=(0,l.sJ)(B),w=(0,l.Zl)(Z),z=(0,v.wp)(e),P=(0,v.wp)(o),_=(0,T.S)(["tokenBalance"]),F=(0,a.Z)(y({tokenASymbol:e,tokenBSymbol:o,tokenAmount:s}),1)[0];return(0,g.useMutation)("swapTokens",(0,p.Z)(m().mark((function n(){var e,o,t,r,i,u,c,l,p,v;return m().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(b===A.Hm.connected){n.next=2;break}throw new Error("Please connect your wallet.");case 2:if(h(d.L.EXECUTING),e=(0,j.q7)(s,z.decimals),o=(0,j.q7)(F.price,P.decimals),t=F.poolForDirectTokenAToTokenBSwap,r=F.poolForDirectTokenBToTokenASwap,i=F.passThroughPools,!t&&!r){n.next=13;break}return u=(null===t||void 0===t?void 0:t.swap_address)?"tokenAtoTokenB":"tokenBtoTokenA",l=null!==(c=null===t||void 0===t?void 0:t.swap_address)&&void 0!==c?c:null===r||void 0===r?void 0:r.swap_address,n.next=12,(0,$.PG)({tokenAmount:e,price:o,slippage:x,senderAddress:k,swapAddress:l,swapDirection:u,tokenA:z,client:f});case 12:case 18:return n.abrupt("return",n.sent);case 13:if(null===i||void 0===i?void 0:i.length){n.next=15;break}throw new Error("Was not able to identify swap route for this token pair. Please contact the engineering team.");case 15:return p=(0,a.Z)(i,1),v=p[0],n.next=18,(0,$.eI)({tokenAmount:e,price:o,slippage:x,senderAddress:k,tokenA:z,swapAddress:v.inputPool.swap_address,outputSwapAddress:v.outputPool.swap_address,client:f});case 19:case"end":return n.stop()}}),n)}))),{onSuccess:function(){S.Am.custom((function(n){return(0,i.jsx)(u.FN,{icon:(0,i.jsx)(u.a1,{icon:(0,i.jsx)(u.An,{}),color:"primary"}),title:"Swap successful",body:"Turned ".concat((0,C.D)(s,"tokenAmount")," ").concat(z.symbol," to ").concat((0,C.D)(F.price,"tokenAmount")," ").concat(P.symbol),onClose:function(){return S.Am.dismiss(n.id)}})})),w((function(n){var e=(0,a.Z)(n,2),o=e[0],i=e[1];return[(0,r.Z)((0,t.Z)({},o),{amount:0}),i]})),_()},onError:function(n){var e=(0,u.qS)(n);S.Am.custom((function(n){return(0,i.jsx)(u.FN,{icon:(0,i.jsx)(u.Pz,{color:"error"}),title:"Oops swap error!",body:e,buttons:(0,i.jsx)(u.zx,{as:"a",variant:"ghost",href:"http://discord.gg/mun",target:"__blank",iconRight:(0,i.jsx)(u.fu,{}),children:"Provide feedback"}),onClose:function(){return S.Am.dismiss(n.id)}})}))},onSettled:function(){h(d.L.IDLE)}})}({tokenASymbol:null===w||void 0===w?void 0:w.tokenSymbol,tokenBSymbol:null===z||void 0===z?void 0:z.tokenSymbol,tokenAmount:null===w||void 0===w?void 0:w.amount}),M=L.mutate,N=L.isLoading;(0,c.useEffect)((function(){!e&&!N&&k&&(M(),h(!1))}),[e,N,k,M]);var O=function(){if(F===A.Hm.connected)return h(!0);I(null)},Q=N||!z.tokenSymbol||!w.tokenSymbol||F!==A.Hm.connected||w.amount<=0||(null===w||void 0===w?void 0:w.amount)>P;return"small"===s?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(u.gF,{css:{display:"grid",padding:"$6 0"},children:(0,i.jsx)(Y,{slippage:E,onSlippageChange:D,css:{width:"100%"}})}),(0,i.jsxs)(u.gF,{justifyContent:"space-between",css:{padding:"$8 $12",backgroundColor:"$colors$dark10",borderRadius:"$1"},children:[(0,i.jsx)(u.xv,{variant:"legend",transform:"uppercase",children:"Swap fee"}),(0,i.jsxs)(u.xv,{variant:"legend",children:[100*b.i9,"%"]})]}),(0,i.jsx)(u.gF,{css:{display:"grid",paddingTop:"$8"},children:(0,i.jsx)(u.zx,{variant:"primary",size:"large",disabled:Q,onClick:N||e?void 0:O,children:N?(0,i.jsx)(u.$j,{instant:!0}):"Swap"})})]}):(0,i.jsxs)(sn,{children:[(0,i.jsxs)(un,{children:[(0,i.jsx)(cn,{kind:"slippage",children:(0,i.jsx)(Y,{slippage:E,onSlippageChange:D,css:{borderRadius:"$2 0 0 $2"}})}),(0,i.jsx)(cn,{kind:"fees",children:(0,i.jsxs)(u.xv,{variant:"legend",children:["Swap fee (",100*b.i9,"%)"]})})]}),(0,i.jsx)(u.zx,{variant:"primary",size:"large",disabled:Q,onClick:N||e?void 0:O,children:N?(0,i.jsx)(u.$j,{instant:!0}):"Swap"})]})},sn=(0,u.zo)("div",{display:"grid",gridTemplateColumns:"1fr 150px",columnGap:12,alignItems:"center",padding:"12px 0"}),un=(0,u.zo)("div",{display:"flex",alignItems:"center",textTransform:"uppercase",borderRadius:8}),cn=(0,u.zo)("div",{display:"grid",variants:{kind:{slippage:{backgroundColor:"transparent",minWidth:"140px",borderRadius:"$4 0 0 $4",borderRight:"1px solid $borderColors$default"},fees:{backgroundColor:"$colors$dark10",flex:1,padding:"$space$8 $space$12",borderRadius:"0 $2 $2 0"}}}}),ln=function(n){var e=n.onTokenSwaps,o=n.disabled,t=n.size,r=void 0===t?"large":t,s=(0,c.useState)(!1),d=s[0],p=s[1],f=(0,a.Z)((0,l.sJ)(Z),2),m=f[0],v=f[1],k=(0,a.Z)(y({tokenASymbol:null===m||void 0===m?void 0:m.tokenSymbol,tokenBSymbol:null===v||void 0===v?void 0:v.tokenSymbol,tokenAmount:(null===m||void 0===m?void 0:m.amount)||1}),2),g=k[0].price,b=k[1],h=P({tokenASymbol:null===m||void 0===m?void 0:m.tokenSymbol,tokenBSymbol:null===v||void 0===v?void 0:v.tokenSymbol,tokenAAmount:(null===m||void 0===m?void 0:m.amount)||1,tokenToTokenPrice:g,isLoading:b}),x=h.isShowing,w=h.conversionRate,S=h.conversionRateInDollar,$=h.dollarValue,A=(0,i.jsx)(u.zx,{icon:(0,i.jsx)(fn,{icon:(0,i.jsx)(u.ei,{}),flipped:d}),variant:"ghost",onClick:o?void 0:function(){p(!d),e()},iconColor:"tertiary"}),j=(0,i.jsxs)(i.Fragment,{children:["1 ",m.tokenSymbol," \u2248 ",(0,u.a)(w)," ",v.tokenSymbol," \u2248 ","$",(0,u.MK)(S,{includeCommaSeparation:!0})]}),T=(0,u.MK)($,{includeCommaSeparation:!0});return"small"===r?(0,i.jsxs)(u.gF,{justifyContent:"space-between",css:{padding:x?"$10 $12 $10 $9":"$11 $12 $11 $9",borderTop:"1px solid $borderColors$inactive",borderBottom:"1px solid $borderColors$inactive"},children:[A,x&&(0,i.jsxs)(u.sg,{align:"flex-end",gap:2,children:[(0,i.jsx)(u.xv,{variant:"caption",color:"disabled",wrap:!1,children:j}),(0,i.jsxs)(u.xv,{variant:"caption",color:"disabled",wrap:!1,children:["Swap estimate: $",T]})]})]}):(0,i.jsxs)(dn,{children:[(0,i.jsxs)(pn,{children:[A,x&&(0,i.jsx)(u.xv,{variant:"legend",wrap:!1,children:j})]}),(0,i.jsxs)(u.xv,{variant:"legend",children:["$",T]})]})},dn=(0,u.zo)("div",{padding:"$8 $16 $8 $12",display:"grid",gridTemplateColumns:"1fr 1fr",justifyContent:"space-between",alignItems:"center",textAlign:"right",borderTop:"1px solid $borderColors$inactive",borderBottom:"1px solid $borderColors$inactive"}),pn=(0,u.zo)("div",{display:"flex",alignItems:"center",textAlign:"left",columnGap:"$space$6"}),fn=(0,u.zo)(u.a1,{variants:{flipped:{true:{transform:"rotateX(180deg)"},false:{transform:"rotateX(0deg)"}}}}),mn=function(n){var e=n.initialTokenPair,o=(0,a.Z)((0,l.FV)(Z),2),p=(0,a.Z)(o[0],2),f=p[0],m=p[1],v=o[1],k=(0,l.sJ)(d.c),g=(0,a.Z)((0,s.K)(),2),b=g[0],h=g[1];(0,c.useEffect)((function(){!f.tokenSymbol&&!m.tokenSymbol&&b&&v([{tokenSymbol:b.base_token.symbol,amount:f.amount||0},m])}),[b,f,m,v]);var x=(0,c.useRef)(e).current;(0,c.useEffect)((function(){if(x){var n=(0,a.Z)(x,2),e=n[0],o=n[1];v([{tokenSymbol:e,amount:0},{tokenSymbol:o,amount:0}])}}),[x,v]);var w=k===d.L.EXECUTING||h,S=(0,u.GS)("sm")?"small":"large",$=(0,a.Z)(y({tokenASymbol:null===f||void 0===f?void 0:f.tokenSymbol,tokenBSymbol:null===m||void 0===m?void 0:m.tokenSymbol,tokenAmount:(null===f||void 0===f?void 0:f.amount)||1}),2),A=$[0].price,j=$[1];return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(vn,{children:[(0,i.jsx)(q,{tokenSymbol:f.tokenSymbol,amount:f.amount,onChange:function(n){v([n,m])},disabled:w,size:S}),(0,i.jsx)(ln,{disabled:w,onTokenSwaps:function(){v([m?(0,r.Z)((0,t.Z)({},m),{amount:A}):m,f?(0,r.Z)((0,t.Z)({},f),{amount:m.amount}):f])},size:S}),(0,i.jsx)(q,{readOnly:!0,tokenSymbol:m.tokenSymbol,amount:A,onChange:function(n){v([f,n])},disabled:w,size:S})]}),(0,i.jsx)(an,{isPriceLoading:j,size:S})]})},vn=(0,u.zo)("div",{borderRadius:"8px",backgroundColor:"$colors$dark10"})},52199:function(n,e,o){o.d(e,{h:function(){return s}});var t=o(828),r=o(88767),a=o(60233),i=o(90249),s=function(){var n=(0,t.Z)((0,i.Q)(),1)[0];return(0,r.useQuery)("@cosmwasm-client",(function(){return a.x.connect(n.rpc)}),{enabled:Boolean(null===n||void 0===n?void 0:n.rpc)}).data}},65047:function(n,e,o){o.d(e,{S:function(){return c}});var t=o(47568),r=o(34051),a=o.n(r),i=o(67294),s=o(88767),u=function(n){return new Promise((function(e){return setTimeout(e,n)}))},c=function(n,e){var o=(0,s.useQueryClient)(),r=(0,i.useRef)(n);return r.current=n,(0,i.useCallback)(function(){var n=(0,t.Z)(a().mark((function n(t){var i;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i=t||r.current,!e){n.next=4;break}return n.next=4,u(e);case 4:if(!Array.isArray(i)){n.next=6;break}return n.abrupt("return",Promise.all(i.map((function(n){return o.refetchQueries(new RegExp(n))}))));case 6:return n.abrupt("return",o.refetchQueries("string"===typeof i&&new RegExp(i)));case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),[o,e])}},25344:function(n,e,o){o.d(e,{t:function(){return x}});var t=o(47568),r=o(828),a=o(34051),i=o.n(a),s=o(61848),u=o(88767),c=o(29815),l=function(n,e){var o,t=[],r=[];return function(a){return t.push(a),new Promise((function(a,i){r.push([a,i]),clearTimeout(o),o=setTimeout((function(){var e,o=n((0,c.Z)(t));r.forEach((function(n){return(e=o).then.apply(e,(0,c.Z)(n))})),r=[],t=[]}),e)}))}}(function(){var n=(0,t.Z)(i().mark((function n(e){var o,t;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=e.flat().join(","),n.next=3,fetch("https://api.coingecko.com/api/v3/simple/price?ids=".concat(o,"&vs_currencies=usd"),{method:"GET"});case 3:return t=n.sent,n.abrupt("return",t.json());case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),100);var d=o(85893),p=o(80975),f=(o(67294),o(86501));var m=function(){var n,e,o=function(){f.Am.custom((function(n){return(0,d.jsx)(p.FN,{icon:(0,d.jsx)(p.Pz,{color:"error"}),title:"Oops, sorry! Our pricing service is temporarily down",onClose:function(){return f.Am.dismiss(n.id)}})}))};return function(){if(n)return clearTimeout(e),void(e=setTimeout(o,6e4));n=!0,o()}}();function v(n){return k.apply(this,arguments)}function k(){return(k=(0,t.Z)(i().mark((function n(e){var o;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(null===e||void 0===e?void 0:e.length){n.next=2;break}throw new Error("Provide token ids in order to query their price");case 2:return n.prev=2,n.next=5,l(e);case 5:return o=n.sent,-1!=e.findIndex((function(n){return"mun-network"===n}))&&(o["mun-network"]={usd:.15}),-1!=e.findIndex((function(n){return"mun-swap"===n}))&&(o["mun-network"]={usd:.01}),-1!=e.findIndex((function(n){return"mun-doge"===n}))&&(o["mun-doge"]={usd:.0015}),n.abrupt("return",e.map((function(n){var e;return(null===(e=o[n])||void 0===e?void 0:e.usd)||0})));case 12:throw n.prev=12,n.t0=n.catch(2),m(),n.t0;case 16:case"end":return n.stop()}}),n,null,[[2,12]])})))).apply(this,arguments)}var g=o(8552),b=o(94862),h=o(56979),x=function(n){var e=((0,h.Vd)()||{}).symbol,o=(0,h.wp)(n),t=(null===o||void 0===o?void 0:o.id)?n:e,a=(0,r.Z)(y(t?[t]:null),2),i=(0,r.Z)(a[0],1)[0],u=a[1],c=(0,r.Z)((0,s.hm)({tokenASymbol:n,tokenBSymbol:e}),2),l=c[0],d=c[1];return n===e||Boolean(null===o||void 0===o?void 0:o.id)?[i,u]:[i*l,u||d]},y=function(n){var e=(0,h.Cs)(),o=(0,b.sX)(),r=(0,u.useQuery)("tokenDollarValue/".concat(null===n||void 0===n?void 0:n.join("/")),(0,t.Z)(i().mark((function t(){var r;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=null===n||void 0===n?void 0:n.map((function(n){var t,r,a;return null===(a=(null===(t=e([n]))||void 0===t?void 0:t[0])||(null===(r=o([n]))||void 0===r?void 0:r[0]))||void 0===a?void 0:a.id})),!r){t.next=3;break}return t.abrupt("return",v(r));case 3:case"end":return t.stop()}}),t)}))),{enabled:Boolean(null===n||void 0===n?void 0:n.length),refetchOnMount:"always",refetchInterval:g.w7,refetchIntervalInBackground:!0});return[r.data||[],r.isLoading]}},36337:function(n,e,o){o.d(e,{g:function(){return u}});var t=o(47568),r=o(34051),a=o.n(r),i=o(20340),s=o(71505);function u(n){return c.apply(this,arguments)}function c(){return(c=(0,t.Z)(a().mark((function n(e){var o,t,r,u,c,l,d,p,f,m,v,k;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=e.matchingPools,t=e.tokenA,r=e.tokenB,u=e.amount,c=e.client,t.symbol!==r.symbol){n.next=3;break}return n.abrupt("return",{price:1});case 3:return l=function(n){return(0,s.rp)(n,r.decimals)},d=(0,s.q7)(u,t.decimals),p=o.poolForDirectTokenAToTokenBSwap,f=o.poolForDirectTokenBToTokenASwap,m=o.passThroughPools,v=[],p&&v.push((0,i.qT)({nativeAmount:d,swapAddress:p.swap_address,client:c}).then((function(n){return{price:l(n),poolForDirectTokenAToTokenBSwap:p}}))),f&&v.push((0,i.cz)({tokenAmount:d,swapAddress:f.swap_address,client:c}).then((function(n){return{price:l(n),poolForDirectTokenBToTokenASwap:f}}))),(null===m||void 0===m?void 0:m.length)&&m.forEach((function(n){v.push((0,i.Ei)({tokenAmount:d,swapAddress:n.inputPool.swap_address,outputSwapAddress:n.outputPool.swap_address,client:c}).then((function(e){return{price:l(e),passThroughPools:[n]}})))})),n.next=12,Promise.all(v);case 12:return k=n.sent,n.abrupt("return",k.reduce((function(n,e){return(null===n||void 0===n?void 0:n.price)<e.price?e:n}),k[0]));case 14:case"end":return n.stop()}}),n)})))).apply(this,arguments)}},94530:function(n,e,o){o.d(e,{X:function(){return s},M:function(){return u}});var t=o(828),r=o(67294),a=o(21006);function i(n,e,o){return n.find((function(n){var r=(0,t.Z)(n.pool_assets,2),a=r[0],i=r[1];return e.symbol===a.symbol&&o.symbol===i.symbol}))}var s=function(){var n=(0,a.r)(),e=n.data,o=n.isLoading;return[(0,r.useCallback)((function(n){var o=n.tokenA,r=n.tokenB;if((null===e||void 0===e?void 0:e.pools)&&o&&r)return function(n){var e=n.tokenA,o=n.tokenB,r=n.poolsList;return r.reduce((function(n,a){var s,u,c=(0,t.Z)(a.pool_assets,2),l=c[0],d=c[1],p=l.symbol===e.symbol&&d.symbol===o.symbol,f=l.symbol===o.symbol&&d.symbol===e.symbol;if(p)return n.poolForDirectTokenAToTokenBSwap=a,n;if(f)return n.poolForDirectTokenBToTokenASwap=a,n;if(l.symbol!==e.symbol&&[e.symbol,o.symbol].includes(d.symbol)){var m=d.symbol===e.symbol,v=d.symbol===o.symbol,k=m?a:i(r,l,e),g=v?a:i(r,l,o),b={inputPool:k,outputPool:g},h=k&&g&&(s=n.passThroughPools,u=b,!s.find((function(n){return n.inputPool.pool_id===u.inputPool.pool_id&&n.outputPool.pool_id===u.outputPool.pool_id})));h&&n.passThroughPools.push(b)}return n}),{poolForDirectTokenAToTokenBSwap:null,poolForDirectTokenBToTokenASwap:null,passThroughPools:[]})}({tokenA:o,tokenB:r,poolsList:e.pools})}),[e]),o]},u=function(n){var e=n.tokenA,o=n.tokenB,a=(0,t.Z)(s(),2),i=a[0],u=a[1];return(0,r.useMemo)((function(){return[i({tokenA:e,tokenB:o}),u]}),[i,u,e,o])}},20340:function(n,e,o){o.d(e,{PG:function(){return u},fT:function(){return f},qT:function(){return l},cz:function(){return d},Ei:function(){return p},eI:function(){return c}});var t=o(47568),r=o(34051),a=o.n(r),i=o(24658),s=o(86783),u=function(){var n=(0,t.Z)(a().mark((function n(e){var o,t,r,u,c,l,d,p,f,m,v,k;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=e.tokenA,t=e.swapDirection,r=e.swapAddress,u=e.senderAddress,c=e.slippage,l=e.price,d=e.tokenAmount,p=e.client,f=Math.floor(l*(1-c)),m={swap:{input_token:"tokenAtoTokenB"===t?"Token1":"Token2",input_amount:"".concat(d),min_output:"".concat(f)}},o.native){n.next=11;break}return v=(0,s.b9)({senderAddress:u,tokenAmount:d,tokenAddress:o.token_address,swapAddress:r}),k=(0,s.L$)({senderAddress:u,contractAddress:r,message:m}),n.t0=s.uv,n.next=9,p.signAndBroadcast(u,[v,k],"auto");case 9:return n.t1=n.sent,n.abrupt("return",(0,n.t0)(n.t1));case 11:return n.next=13,p.execute(u,r,m,"auto",void 0,[(0,i.coin)(d,o.denom)]);case 13:return n.abrupt("return",n.sent);case 14:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),c=function(){var n=(0,t.Z)(a().mark((function n(e){var o,t,r,u,c,l,d,p,f,m,v,k;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=e.tokenAmount,t=e.tokenA,r=e.outputSwapAddress,u=e.swapAddress,c=e.senderAddress,l=e.slippage,d=e.price,p=e.client,f=Math.floor(d*(1-l)),m={pass_through_swap:{output_min_token:"".concat(f),input_token:"Token2",input_token_amount:"".concat(o),output_amm_address:r}},t.native){n.next=11;break}return v=(0,s.b9)({senderAddress:c,tokenAmount:o,tokenAddress:t.token_address,swapAddress:u}),k=(0,s.L$)({senderAddress:c,contractAddress:u,message:m}),n.t0=s.uv,n.next=9,p.signAndBroadcast(c,[v,k],"auto");case 9:return n.t1=n.sent,n.abrupt("return",(0,n.t0)(n.t1));case 11:return n.next=13,p.execute(c,u,m,"auto",void 0,[(0,i.coin)(o,t.denom)]);case 13:return n.abrupt("return",n.sent);case 14:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),l=function(){var n=(0,t.Z)(a().mark((function n(e){var o,t,r,i;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=e.nativeAmount,t=e.swapAddress,r=e.client,n.prev=1,n.next=4,r.queryContractSmart(t,{token1_for_token2_price:{token1_amount:"".concat(o)}});case 4:return i=n.sent,n.abrupt("return",i.token2_amount);case 8:n.prev=8,n.t0=n.catch(1),console.error("err(getToken1ForToken2Price):",n.t0);case 11:case"end":return n.stop()}}),n,null,[[1,8]])})));return function(e){return n.apply(this,arguments)}}(),d=function(){var n=(0,t.Z)(a().mark((function n(e){var o,t,r,i;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=e.tokenAmount,t=e.swapAddress,r=e.client,n.prev=1,n.next=4,r.queryContractSmart(t,{token2_for_token1_price:{token2_amount:"".concat(o)}});case 4:return i=n.sent,n.abrupt("return",i.token1_amount);case 8:n.prev=8,n.t0=n.catch(1),console.error("error(getToken2ForToken1Price):",n.t0);case 11:case"end":return n.stop()}}),n,null,[[1,8]])})));return function(e){return n.apply(this,arguments)}}(),p=function(){var n=(0,t.Z)(a().mark((function n(e){var o,t,r,i,s;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=e.tokenAmount,t=e.swapAddress,r=e.outputSwapAddress,i=e.client,n.prev=1,n.next=4,d({tokenAmount:o,swapAddress:t,client:i});case 4:return s=n.sent,n.abrupt("return",l({nativeAmount:s,swapAddress:r,client:i}));case 8:n.prev=8,n.t0=n.catch(1),console.error("error(getTokenForTokenPrice)",n.t0);case 11:case"end":return n.stop()}}),n,null,[[1,8]])})));return function(e){return n.apply(this,arguments)}}(),f=function(){var n=(0,t.Z)(a().mark((function n(e,o){return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,e&&o){n.next=3;break}throw new Error("No swapAddress or rpcEndpoint was provided: ".concat(JSON.stringify({swapAddress:e,client:o})));case 3:return n.next=5,o.queryContractSmart(e,{info:{}});case 5:return n.abrupt("return",n.sent);case 8:n.prev=8,n.t0=n.catch(0),console.error("Cannot get swap info:",n.t0);case 11:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(e,o){return n.apply(this,arguments)}}()},60233:function(n,e,o){o.d(e,{x:function(){return u}});var t=o(47568),r=o(51438),a=o(34051),i=o.n(a),s=o(74926),u=new(function(){function n(){(0,r.Z)(this,n),this.clients={}}var e=n.prototype;return e.connect=function(n){var e=this;return(0,t.Z)(i().mark((function o(){return i().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return e.getClientInstance(n)||e.setClientInstance(n,s.oJ.connect(n)),o.abrupt("return",e.getClientInstance(n));case 2:case"end":return o.stop()}}),o)})))()},e.getClientInstance=function(n){return this.clients[n]},e.setClientInstance=function(n,e){this.clients[n]=e},n}())},21077:function(n,e,o){o.d(e,{D:function(){return s}});var t=o(80975),r=new Intl.NumberFormat("en-US",{minimumFractionDigits:0,maximumFractionDigits:1}),a=1e6,i=1e8,s=function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"dollarValue";return n>i?"".concat(Math.round(n/i),"M"):n>a?"".concat(r.format(n/a),"M"):n>1e4?"".concat(r.format(Math.round(n/1e3)),"K"):n>1e3?(0,t.zO)(Math.round(n),{includeCommaSeparation:!0}):"dollarValue"===e?(0,t.zO)(n,{includeCommaSeparation:!0}):(0,t.a)(n)}},86783:function(n,e,o){o.d(e,{L$:function(){return a},b9:function(){return i},uv:function(){return u}});var t=o(28972),r=o(2387),a=function(n){var e=n.senderAddress,o=n.contractAddress,a=n.message,i=n.funds;return{typeUrl:"/cosmwasm.wasm.v1.MsgExecuteContract",value:r.MsgExecuteContract.fromPartial({sender:e,contract:o,msg:(0,t.toUtf8)(JSON.stringify(a)),funds:i||[]})}},i=function(n){var e=n.senderAddress,o=n.tokenAmount,a=n.tokenAddress,i=n.swapAddress;return{typeUrl:"/cosmwasm.wasm.v1.MsgExecuteContract",value:r.MsgExecuteContract.fromPartial({sender:e,contract:a,msg:(0,t.toUtf8)(JSON.stringify({increase_allowance:{amount:"".concat(o),spender:"".concat(i)}})),funds:[]})}},s=o(24658);function u(n){if((0,s.isDeliverTxFailure)(n))throw new Error("Error when broadcasting tx ".concat(n.transactionHash," at height ").concat(n.height,". Code: ").concat(n.code,"; Raw log: ").concat(n.rawLog));return n}}}]);