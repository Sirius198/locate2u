(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[184],{69107:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pools/[pool]",function(){return t(33328)}])},33328:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return Z}});var i=t(14924),r=t(828),o=t(85893),s=t(3413),d=t(13838),a=t(65047),u=t(47568),l=t(99534),c=t(34051),p=t.n(c),v=t(88767),f=t(4480),m=t(10561),y=t(78284),k=t(8552),h=t(71505),g=t(924),x=t(27404),w=function(e){var n,t=e.pool,i=(0,f.sJ)(y.Zc),o=i.address,s=i.status,d=i.client,a=(0,r.Z)(j(),2),l=a[0],c=a[1],x=(0,r.Z)((0,g.a)(),2),w=x[0],q=x[1],_=(null===t||void 0===t||null===(n=t.rewards_tokens)||void 0===n?void 0:n.length)>0&&(null===t||void 0===t?void 0:t.staking_address),b=(0,v.useQuery)("pendingRewards/".concat(null===t||void 0===t?void 0:t.pool_id,"/").concat(o,"/").concat(_),(0,u.Z)(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!_){e.next=4;break}return e.next=3,Promise.all(t.rewards_tokens.map(function(){var e=(0,u.Z)(p().mark((function e(n){var t,i,r,s,a,u,c;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.rewards_address,i=n.decimals,e.next=3,(0,m.Kv)(o,t,d);case 3:return r=e.sent,s=r.pending_rewards,a=r.denom,u=l({denom:a}),c=(0,h.rp)(Number(s),null!==i&&void 0!==i?i:u.decimals),e.t0=c,e.t1=u,e.next=12,w({tokenInfo:u,tokenAmountInDenom:c});case 12:return e.t2=e.sent,e.abrupt("return",{tokenAmount:e.t0,tokenInfo:e.t1,dollarValue:e.t2});case 14:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),{enabled:Boolean(t&&k.h6&&_&&c&&q&&s===y.Hm.connected),refetchOnMount:"always",refetchInterval:k.w7,refetchIntervalInBackground:!0});return[b.data,b.isLoading]},j=function(){var e=(0,r.Z)((0,x.K)(),1)[0];return[function(n){var t=n.denom;return e.tokens.find((function(e){var n=e.denom,i=e.token_address;return"native"in t?t.native===n:"cw20"in t?t.cw20===i:void 0}))},Boolean(null===e||void 0===e?void 0:e.tokens)]},q=t(80975),_=t(9008),b=t.n(_),C=t(11163),A=t(81653),I=t(67294),R=t(86501),S=t(28869);function Z(){var e=(0,C.useRouter)().query.pool,n=(0,I.useState)({isShowing:!1,actionType:"add"}),t=n[0],i=t.isShowing,c=t.actionType,h=n[1],g=(0,I.useState)(!1),x=g[0],j=g[1],_=(0,q.GS)("sm"),Z=(0,r.Z)((0,A.Fv)({poolId:e}),3),P=Z[0],B=Z[1],N=Z[2],z=(0,r.Z)(w({pool:P}),1)[0],F=B&&!P,E=Boolean(k.uy&&k.h6&&(null===P||void 0===P?void 0:P.staking_address)),Y=(0,a.S)(["@liquidity","pendingRewards"]),$=function(e){var n=e.pool,t=(0,l.Z)(e,["pool"]),i=(0,f.sJ)(y.Zc),o=i.address,s=i.client,d=(0,r.Z)(w({pool:n}),1)[0];return(0,v.useMutation)("@claim-rewards/".concat(null===n||void 0===n?void 0:n.pool_id),(0,u.Z)(p().mark((function e(){var t,i;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=k.h6&&(null===d||void 0===d?void 0:d.find((function(e){return e.tokenAmount>0}))),!(n&&s&&t)){e.next=7;break}return i=n.rewards_tokens.filter((function(e){return d.find((function(n){var t=n.tokenInfo;return e.symbol===t.symbol})).tokenAmount>0})).map((function(e){return e.rewards_address})),e.next=6,(0,m.YY)(o,i,s);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)}))),t)}({pool:P,onSuccess:function(){Y(),R.Am.custom((function(e){return(0,o.jsx)(q.FN,{icon:(0,o.jsx)(q.a1,{icon:(0,o.jsx)(q.An,{}),color:"valid"}),title:"Rewards were successfully claimed!",onClose:function(){return R.Am.dismiss(e.id)}})}))},onError:function(e){console.error(e),R.Am.custom((function(n){return(0,o.jsx)(q.FN,{icon:(0,o.jsx)(q.a1,{icon:(0,o.jsx)(q.jj,{}),color:"error"}),title:"Couldn't claim your rewards",body:(0,S.q)(e),buttons:(0,o.jsx)(q.zx,{as:"a",variant:"ghost",href:"http://discord.gg/mun",target:"__blank",iconRight:(0,o.jsx)(q.fu,{}),children:"Provide feedback"}),onClose:function(){return R.Am.dismiss(n.id)}})}))}}),J=$.mutate,O=$.isLoading;if(!P||!e)return(0,o.jsx)(q.gF,{align:"center",justifyContent:"center",css:{padding:"$10",height:"100vh"},children:N?(0,o.jsx)(q.xv,{variant:"header",children:"Oops, we've messed up. Please try again later."}):(0,o.jsx)(q.$j,{color:"primary"})});var G=(0,r.Z)(P.pool_assets,2),D=G[0],K=G[1];return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(d.Dv,{isShowing:i,initialActionType:c,onRequestClose:function(){return h({isShowing:!1,actionType:"add"})},poolId:e}),k.uy&&(0,o.jsx)(d.t2,{isShowing:x,onRequestClose:function(){return j(!1)},poolId:e}),P&&(0,o.jsx)(b(),{children:(0,o.jsxs)("title",{children:[k.iC," \u2014 Pool ",D.symbol,"/",K.symbol]})}),(0,o.jsxs)(s.LN,{children:[(0,o.jsx)(d.qY,{tokenA:D,tokenB:K,size:_?"small":"large"}),!_&&(0,o.jsx)(q.iz,{}),F&&(0,o.jsx)(T,{children:(0,o.jsx)(q.$j,{color:"primary",size:32})}),!F&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(d.bh,{poolId:e,tokenA:D,tokenB:K,totalLiquidity:P.liquidity.available.total,yieldPercentageReturn:P.liquidity.rewards.annualYieldPercentageReturn,rewardsContracts:P.liquidity.rewards.contracts,size:_?"small":"large"}),(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)(L,{children:[(0,o.jsx)(d.Jr,{providedLiquidityReserve:P.liquidity.reserves.provided,providedLiquidity:P.liquidity.available.provided,stakedLiquidityReserve:P.liquidity.reserves.providedStaked,providedTotalLiquidity:P.liquidity.providedTotal,stakedLiquidity:P.liquidity.staked,tokenASymbol:D.symbol,tokenBSymbol:K.symbol,supportsIncentives:E,onClick:function(){return h({isShowing:!0,actionType:"add"})}}),(0,o.jsx)(d._u,{onClick:function(){return j(!0)},providedLiquidity:P.liquidity.available.provided,stakedLiquidity:P.liquidity.staked.provided,yieldPercentageReturn:P.liquidity.rewards.annualYieldPercentageReturn,supportsIncentives:E}),(0,o.jsx)(d.n2,{onClick:J,hasBondedLiquidity:P.liquidity.staked.provided.tokenAmount>0,hasProvidedLiquidity:P.liquidity.available.provided.tokenAmount>0,pendingRewards:z,loading:O,supportsIncentives:E})]})}),(0,o.jsx)(o.Fragment,{children:E&&(0,o.jsx)(d.JE,{poolId:e,tokenA:D,tokenB:K,size:_?"small":"large"})})]})]})]})}var L=(0,q.zo)("div",(0,i.Z)({display:"grid",columnGap:"$8",gridTemplateColumns:"1fr 1fr 1fr"},q.BC.sm,{gridTemplateColumns:"1fr",rowGap:"$8"})),T=(0,q.zo)("div",{display:"flex",justifyContent:"center",alignItems:"center",paddingTop:143})}},function(e){e.O(0,[78,714,631,506,399,702,298,838,774,888,179],(function(){return n=69107,e(e.s=n);var n}));var n=e.O();_N_E=n}]);